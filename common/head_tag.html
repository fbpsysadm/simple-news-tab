<script type="text/discourse-plugin" version="0.8.42">
  console.log("[News Tab Theme] Script loaded");
  // Add a new News tab to the navigation bar, linking to /top#news
  api.addNavigationBarItem({
    name: "news",
    displayName: "News",
    href: "/top#news"
  });

  // Function to show/hide news content and topic list
  function toggleNewsContent() {
    console.log("[News Tab Theme] toggleNewsContent called");
    const topicList = document.querySelector('.topic-list');
    const listArea = document.querySelector('#list-area');
    if (topicList) {
      console.log("Hiding topic list");
      topicList.style.display = 'none';
    }
    // Remove any existing injected news div
    const existingNewsDiv = document.getElementById('custom-news-content');
    if (existingNewsDiv) {
      existingNewsDiv.remove();
    }
    // Add a new div with custom text
    if (listArea) {
      const newsDiv = document.createElement('div');
      newsDiv.id = 'custom-news-content';
      newsDiv.style.padding = '2em';
      newsDiv.style.background = '#f9f9f9';
      newsDiv.innerHTML = '<h2>Dynamic News</h2><p>This is some dynamically injected news content.</p>';
      listArea.appendChild(newsDiv);
      console.log("Injected custom news content");
    }
  }

  // Attach click event to News tab to hide topic list and show news content
  api.onPageChange(() => {
    const newsTab = document.querySelector('.nav-item_news');
    if (newsTab) {
      newsTab.onclick = function(e) {
        e.preventDefault();
        toggleNewsContent();
      };
    }
  });
</script>
